<html>

    <head>
        <script type="application/javascript" src="lib/d3.v3.min.js"></script>
    </head>

    <body>
        <svg></svg>
        <script>
        
        d3.csv('athletes_sochi.csv', function(data){
        console.log(data)
        
        var byAge = d3.nest() //dalla lista degli atleti voglio arrivare ad avere una lista di paesi con gli atleti
                        .key(function(d,i){ //quale Ã¨ la chiave che voglio usare nel data set originale
                            return d.age
                        }) 
                        .entries(data) //aggrega per country
                        console.log(byAge)
                        byAge.sort(function(a,b){
                          //  alert(a.key)
                            return d3.descending(a.key,b.key)
                        })
                        var dist = 100
                        d3.select('svg')
                        .attr('width',100000)
                        .selectAll('circle')
                        .data(byAge)
                        .enter()
                        .append('circle')
                        .attr('cx', function(d,i){
                            return 60+(i*110)
                        })
                        
                        .attr('cy', function(d,i){
                            return 70
                        })
                        .attr('r', function(d,i){
                               return d.key                          
                        })
                        .attr('y', 100)
        })
        </script>
    </body>
</html>
